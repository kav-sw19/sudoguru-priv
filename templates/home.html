{% extends "base.html" %}

{% block title %}Sudoku Solver{% endblock %}

{% block content %}
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">

    <link rel="stylesheet" href="{{ url_for('static', filename='styles_guru.css') }}">

    <h1> SudoGuru </h1>
    {% if session['id'] %}
            <p>User: {{ session['username'] }}</p>
    {% endif %}
    <div class="container">
        <form method="POST" action="/">
            <div class="sudoku-container">
                <div class="sudoku-board">
                    {% for i in range(9) %}
                        {% for j in range(9) %}
                            <input type="text" name="cell-{{ i }}-{{ j }}" class="cell {% if (i, j) in invalid_positions %}invalid-cell{% endif %}" 
                                value="{{ grid[i][j] if grid else '' }}" 
                                onclick="selectCell(this)" 
                                autocomplete="off"
                                maxlength="1"
                                oninput="this.value = this.value.replace(/[^1-9]/g, '')">
                        {% endfor %}
                    {% endfor %}
                </div>
                <div class="keypad">
                    <div class="keypad-buttons">
                        {% for num in range(1, 10) %}
                            <button type="button" class="keypad-button" onclick="enterNumber({{ num }})">{{ num }}</button>
                        {% endfor %}
                    </div>
                    
                </div>
            </div>
            <div class="button-container">
                <button type="submit" name="solve" class="solve-buttons">SOLVE</button>
                <button type="submit" name="clear" class="solve-buttons">CLEAR</button>
                <button type="button" name="generate" class="generate-button" onclick="generateHomePuzzle(event)">GENERATE</button>
            </div>    
        </form>
        
        <!-- Error message display -->
        {% if warning %}
                <div class="error-messages">{{ warning }}</div>
            {% endif %}
        
    </div>

    <script src="/static/scripts.js"></script>
    
{% endblock %}